# Примечание: это упрощённый Makefile, достаточный для сборки приложения
# Он содержит лишь необходимые правила и флаги, без обширного autotools-скелета
# Makefile for latin_gen (BOINC app)
# Путь к исходникам BOINC
BOINC_ROOT = /home/boinc

CXX = g++
# Определяем макросы и пути к заголовкам BOINC API
DEFS = -DHAVE_CONFIG_H
INCLUDES = \
    -I$(BOINC_ROOT)/include \
    -I$(BOINC_ROOT)/api \
    -I$(BOINC_ROOT)/lib \
    -I$(BOINC_ROOT)/sched \
    -I$(BOINC_ROOT)/tools
# Параметры многопоточности
PTHREAD_CFLAGS = -pthread
# Объединённые флаги компиляции
CXXFLAGS = -O2 -std=c++17 $(DEFS) $(INCLUDES) $(PTHREAD_CFLAGS)
# Библиотеки BOINC и другие зависимости
BOINC_LIBS = -lboinc_api -lboinc
EXTRA_LIBS = -lcurl -lssl -lcrypto -ldl -lz
LDFLAGS = -L$(BOINC_ROOT)/lib $(BOINC_LIBS) $(EXTRA_LIBS)

TARGET = latin_compute

all: $(TARGET)

$(TARGET): compute_app.cpp
	$(CXX) $(CXXFLAGS) compute_app.cpp $(TARGET) $(LDFLAGS)

clean:
	rm -f $(TARGET)